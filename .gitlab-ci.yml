# GitLab CI/CD pipeline for .NET Core Web API
# Minimal pipeline for debugging runner connectivity

variables:
  TARGET_BRANCH: "CICD_2"

# Very simple job to test runner
hello-world:
  stage: connectivity
  image: alpine:latest
  script:
    - echo "Hello from GitLab CI!"
    - whoami
    - pwd
    - ls -la
    - echo "Job completed successfully!"
  rules:
    - if: '$CI_COMMIT_REF_NAME == $TARGET_BRANCH'

# Test with Ubuntu
ubuntu-test:
  stage: connectivity
  image: ubuntu:latest
  script:
    - echo "Testing with Ubuntu image..."
    - apt-get update -qq
    - apt-get install -y -qq git
    - echo "Ubuntu test completed!"
  rules:
    - if: '$CI_COMMIT_REF_NAME == $TARGET_BRANCH'

stages:
  - connectivity

# Very simple job to test runner
hello-world:
  stage: connectivity
  image: alpine:latest
  script:
    - echo "Hello from GitLab CI!"
    - whoami
    - pwd
    - ls -la
    - echo "Job completed successfully!"
  rules:
    - if: '$CI_COMMIT_REF_NAME == $TARGET_BRANCH'

# Test with Ubuntu
ubuntu-test:
  stage: connectivity
  image: ubuntu:latest
  script:
    - echo "Testing with Ubuntu image..."
    - apt-get update -qq
    - apt-get install -y -qq git
    - echo "Ubuntu test completed!"
  rules:
    - if: '$CI_COMMIT_REF_NAME == $TARGET_BRANCH'

